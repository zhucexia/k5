define("widget/newslist/newslist",["require","exports","module","components/jquery/jquery","components/template/template"],function(a,t,e){{var n=a("components/jquery/jquery"),i=a("components/template/template");e.exports=function(a){var t={init:function(){this.listTemplate='<% for(var i = 0,len = data.data.length; i<len ;i++){%>\n<% var info = data.data[i],path = data.contextpath ; %>\n    <article data="<%=info.id %>">\n        <a class="pic info_flow_news_image badge-o2o before-fade-in after-fade-in" data-fit-mobile="true" href="<%=path %>/p/<%=info.id %>" style="background-image: url(<%=info.image %>);">\n            <span class="mask-tags" data-type="<%=info.infoCategory.code %>" style="background-color: <%=info.infoCategory.colorCode %>"><%=info.infoCategory.name %></span>\n        </a>\n        <div class="desc">\n            <a class="title info_flow_news_title" href="<%=path %>/p/<%=info.id %>" target="_blank"><%=info.title %></a>\n            <div class="author">\n            <a href="<%=path %>/a/<%=info.author.id %>">\n                <span class="avatar before-fade-in" style="background-image: url(<%=info.author.image %>);"></span>\n                <span class="name"><%=info.author.nickname %></span></a>\n                <span class="time">&nbsp;â€¢&nbsp;<time class="timeago" title="<%=info.createDate %>" datetime="<%=info.createDate %>"><%=info.createDate %></time></span>\n            </div>\n            <div class="brief"><%=info.shortDesc %></div>\n        </div>\n    </article>\n<%}%>    ',this.addEvent()},addEvent:function(){var t=this;n(a.dom).click(function(){var e,s=n(".J_listLoadMore");e=0==n(".J_newsListNavBar").length||n(".J_newsListNavBar .firstList").hasClass("active")?a.newsUrl:a.pageCateUrl+n(".J_newsListNavBar .active").attr("data"),s.hasClass("no-data")||(s.addClass("loading"),t.getList(e,{offset:n("#listWrap").children(":last").attr("data"),d:"next"},function(a){if(0==a.code)if(a.data.length){s.removeClass("loading no-data");var e=i.parse(t.listTemplate,{data:a});n("#listWrap").append(e)}else s.removeClass("loading").addClass("no-data")}))}),n(".J_newsListNavBar").length&&n(".J_newsListNavBar").delegate(".tab","click",function(e){var s=(n(this).hasClass("firstList")?a.newsUrl:a.pageCateUrl)+n(this).attr("data");n(".J_listLoadMore").removeClass("loading no-data"),n(e.target).addClass("active").siblings().removeClass("active"),t.getList(s,{d:"next"},function(a){if(0==a.code){var e=i.parse(t.listTemplate,{data:a});n("#listWrap").html(e)}})})},getList:function(a,t,e){n.ajax({type:"get",url:a,data:t,success:e}).complete(function(){})}};t.init()}}});